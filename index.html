<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MORELLO SIMS: NBA + MLB</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Inter:wght@400;600&family=JetBrains+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-matte: #9E9E9E;
            --card-dark: #0a0a0a;
            --card-white: #FFFFFF;
            --accent-nba: #00FF55;
            --accent-mlb: #FFEA00;
            --accent-atlas: #FF6B00;
            --text-on-dark: #FFFFFF;
            --text-on-light: #000000;
            --text-muted-dark: rgba(255, 255, 255, 0.6);
            --text-muted-light: rgba(0, 0, 0, 0.6);
            --border-dark: #080808;
            --border-light: rgba(255, 255, 255, 0.15);

            --font-display: 'Anton', sans-serif;
            --font-header: 'Bebas Neue', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --font-body: 'Inter', sans-serif;

            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 40px;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background-color: var(--bg-matte);
            color: var(--text-on-dark);
            font-family: var(--font-body);
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            width: 100%;
            min-height: 100vh;

            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }
        .mono { font-family: var(--font-mono); }
        .bebas { font-family: var(--font-header); }
        .anton { font-family: var(--font-display); }
        .uppercase { text-transform: uppercase; }


        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: var(--bg-matte);
            border-bottom: 1px solid var(--border-dark);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-md);
        }
        .brand-lockup {
            display: flex;
            align-items: baseline;
            gap: var(--spacing-sm);
        }
        .logo {
            font-size: 20px;
            color: #000;
            transform: skewX(-5deg);
            letter-spacing: 2px;
            line-height: 1;
        }
        .logo-tag {
            font-size: 10px;
            color: #000;
            letter-spacing: 0.5px;
        }
        .status-indicators {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .status-group {
            display: flex;
            align-items: center;
            gap: 3px;
        }
        .status-emoji {
            font-size: 12px;
            line-height: 1;
        }
        .status-dot {
            width: 11px;
            height: 11px;
            border-radius: 50%;
            animation: pulse 2s infinite;
            border: 1px solid rgba(0,0,0,0.3);
        }
        .status-dot.mlb-sim {
            background: var(--accent-mlb);
            animation-delay: 0s;
        }
        .status-dot.mlb-atlas {
            background: var(--accent-atlas);
            animation-delay: 0.3s;
        }
        .status-dot.nba-sim {
            background: var(--accent-nba);
            animation-delay: 0.6s;
        }
        .status-tooltip {
            position: relative;
            cursor: default;
        }
        .status-tooltip::after {
            content: attr(data-label);
            position: absolute;
            top: 16px;
            right: 0;
            background: #000;
            color: #fff;
            font-family: var(--font-mono);
            font-size: 8px;
            padding: 2px 6px;
            border-radius: 2px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .status-tooltip:hover::after {
            opacity: 1;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.4; }
            100% { opacity: 1; }
        }
        .hero-subtitle {
            margin-top: 70px;
            margin-bottom: var(--spacing-md);
            text-align: center;
            font-size: 10px;
            color: #000;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }
        @media (min-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        .card {
            position: relative;
            padding: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 380px;
            transition: transform 0.2s ease;
        }
        .card:hover {
            transform: scale(1.01);
            z-index: 2;
        }
        .card-header {
            margin-bottom: var(--spacing-lg);
        }
        .card-title {
            font-size: 42px;
            line-height: 0.9;
            margin-bottom: var(--spacing-xs);
        }
        .card-meta {
            font-size: 10px;
            letter-spacing: 0.5px;
            line-height: 1.4;
            max-width: 80%;
        }
        .last-updated {
            position: absolute;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            font-size: 8px;
            letter-spacing: 1px;
        }

        .card-nba {
            background: var(--card-dark);
            border-left: 4px solid var(--accent-nba);
            border-radius: 12px;
            color: var(--text-on-dark);

            box-shadow: 0 0 0 1px rgba(255,255,255,0.05);
        }

        .card-nba:hover {
            box-shadow: 0 0 20px rgba(0, 255, 85, 0.15);
            border-left-color: #4dff88;
        }
        .card-nba .card-meta { color: var(--accent-nba); }
        .card-nba .last-updated { color: rgba(255,255,255,0.3); }

        .card-mlb {
            background: var(--card-white);
            border: 2px solid var(--border-dark);
            box-shadow: 6px 6px 0px var(--border-dark);
            color: var(--text-on-light);
            border-radius: 0;

            background-image: radial-gradient(#000 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .card-mlb:hover {
            box-shadow: 8px 8px 0px var(--accent-mlb);
        }
        .card-mlb .card-title {
            transform: skewX(-5deg);
        }
        .card-mlb .card-meta { color: rgba(0,0,0,0.6); background: #fff; display: inline-block; padding-right: 4px; }
        .card-mlb .last-updated { color: rgba(0,0,0,0.4); background: #fff; padding: 2px; }

        .data-preview {
            margin-top: auto;
            margin-bottom: var(--spacing-lg);
            font-size: 12px;
            width: 100%;
        }
        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid;
        }
        .card-nba .data-row { border-color: rgba(255,255,255,0.1); }
        .card-mlb .data-row { border-color: rgba(0,0,0,0.1); background: rgba(255,255,255,0.9); padding: 8px 4px; }
        .team-pair {
            display: flex;
            gap: 8px;
            font-size: 16px;
        }

        .stat-val {
            font-size: 11px;
            letter-spacing: 1px;
        }
        .grade-badge {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            border-radius: 4px;
        }
        .grade-a { background: var(--accent-nba); color: black; }
        .grade-b { background: #FFD600; color: black; }
        .grade-c { background: rgba(255,255,255,0.2); color: white; }

        .mlb-badge {
            font-size: 9px;
            padding: 2px 6px;
            border: 1px solid #000;
            text-transform: uppercase;
        }

        .btn-action {
            display: inline-block;
            text-decoration: none;
            padding: 12px 20px;
            font-size: 12px;
            transition: all 0.1s;
            cursor: pointer;
            width: 100%;
            text-align: center;
        }
        .btn-nba {
            background: var(--accent-nba);
            color: #000;
            border-radius: 4px;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.5);
        }
        .btn-nba:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px rgba(0,0,0,0.5);
        }
        .btn-mlb {
            background: var(--accent-mlb);
            color: #000;
            border: 2px solid #000;
            box-shadow: 4px 4px 0px #000;
            font-family: var(--font-display);
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-mlb:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #000;
        }

        .log-divider {
            position: relative;
            height: 1px;
            background: linear-gradient(90deg, transparent, #000, transparent);
            margin: var(--spacing-xl) 0;
            text-align: center;
            overflow: visible;
        }
        .log-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-matte);
            padding: 0 10px;
            font-size: 9px;
            color: #000;
            letter-spacing: 3px;
            border: 1px solid #000;
        }

        .blog-feed {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            padding-bottom: 80px;
        }
        .blog-card {
            background: var(--card-dark);
            padding: 0;
            display: block;
            transition: transform 0.2s ease;
            position: relative;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .blog-card > summary {
            padding: var(--spacing-lg);
            cursor: pointer;
            list-style: none;
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-md);
            position: relative;
        }
        .blog-card > summary::-webkit-details-marker { display: none; }
        .blog-card > summary::marker { display: none; content: ''; }
        .blog-card > summary::after {
            content: '+';
            position: absolute;
            bottom: var(--spacing-md);
            right: var(--spacing-lg);
            font-family: var(--font-mono);
            font-size: 18px;
            color: rgba(255,255,255,0.25);
            transition: transform 0.3s, color 0.3s;
            line-height: 1;
        }
        .blog-card[open] > summary::after {
            content: '\2212';
            color: rgba(255,255,255,0.5);
        }
        .blog-card > summary:hover::after {
            color: rgba(255,255,255,0.6);
        }
        .blog-card-body {
            padding: 0 var(--spacing-lg) var(--spacing-lg) var(--spacing-lg);
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-md);
            border-top: 1px solid rgba(255,255,255,0.06);
        }

        .blog-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-nba), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .blog-card.post-mlb::before {
            background: linear-gradient(90deg, var(--accent-mlb), var(--accent-atlas), transparent);
        }
        .blog-card.post-nba::before {
            background: linear-gradient(90deg, var(--accent-nba), transparent);
        }
        .blog-card:hover {
            transform: translateY(-2px);
            border-color: rgba(255,255,255,0.2);
        }
        .blog-card[open] {
            border-color: rgba(255,255,255,0.15);
        }
        .blog-card[open]::before {
            opacity: 1;
        }

        .blog-card:hover::before {
            opacity: 1;
        }
        .blog-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .blog-date {
            color: rgba(255,255,255,0.3);
            font-size: 9px;
        }
        .blog-system-dots {
            display: flex;
            gap: 4px;
            align-items: center;
        }
        .blog-system-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .blog-system-dot.dot-mlb-sim { background: var(--accent-mlb); }
        .blog-system-dot.dot-mlb-atlas { background: var(--accent-atlas); }
        .blog-system-dot.dot-nba-sim { background: var(--accent-nba); }
        .blog-title {
            color: #FFF;
            font-size: 24px;
            line-height: 1.1;
            margin-bottom: var(--spacing-sm);
        }
        .blog-preview {
            color: rgba(255,255,255,0.6);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
        }
        .blog-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .tag {
            border: 1px solid rgba(255,255,255,0.15);
            color: #FFF;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: background 0.2s;
        }
        .tag:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #FFF;
        }

        /* System diagram styles */
        .system-diagram {
            width: 100%;
            margin: var(--spacing-md) 0;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        .system-diagram svg {
            width: 100%;
            height: auto;
            display: block;
        }
        .diagram-label {
            font-size: 9px;
            color: rgba(255,255,255,0.3);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 6px;
        }

        .blog-section-header {
            font-size: 16px;
            color: #FFF;
            margin: var(--spacing-lg) 0 var(--spacing-sm) 0;
            padding-bottom: 4px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .blog-body-text {
            color: rgba(255,255,255,0.7);
            font-size: 13px;
            line-height: 1.7;
            margin-bottom: var(--spacing-md);
        }
        .blog-body-text strong {
            color: rgba(255,255,255,0.9);
        }
        .blog-body-text code {
            background: rgba(255,255,255,0.08);
            padding: 1px 5px;
            border-radius: 3px;
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--accent-nba);
        }
        .blog-body-text.mlb code {
            color: var(--accent-mlb);
        }

        .pipeline-step {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(255,255,255,0.03);
            border-left: 2px solid rgba(255,255,255,0.1);
        }
        .pipeline-step .step-num {
            font-family: var(--font-mono);
            font-size: 11px;
            color: var(--accent-nba);
            min-width: 24px;
            font-weight: bold;
        }
        .pipeline-step.mlb .step-num {
            color: var(--accent-mlb);
        }
        .pipeline-step .step-text {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
            line-height: 1.5;
        }
        .pipeline-step .step-text strong {
            color: rgba(255,255,255,0.9);
        }

        .flowchart-block {
            border: 1px dashed rgba(255,255,255,0.2);
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
            color: rgba(255,255,255,0.3);
            font-size: 10px;
        }

        footer {
            background: #080808;
            padding: 40px var(--spacing-md);
            margin-top: var(--spacing-xl);
            color: #FFF;
            border-top: 2px solid #000;
        }
        .footer-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .footer-links {
            display: flex;
            gap: 20px;
        }
        .footer-links a {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            font-size: 10px;
        }

        .footer-links a:hover {
            color: var(--accent-nba);
            text-decoration: underline;
        }
        .barcode {
            height: 30px;
            width: 140px;
            background-image: linear-gradient(90deg,
                #fff 2px, transparent 2px,
                transparent 4px, #fff 4px,
                #fff 6px, transparent 6px,
                transparent 7px, #fff 7px,
                #fff 12px, transparent 12px,
                transparent 14px, #fff 14px,
                #fff 18px, transparent 18px,
                transparent 19px, #fff 19px,
                #fff 24px, transparent 24px
            );
            opacity: 0.4;
        }
    </style>
</head>
<body>
    <header>
        <div class="brand-lockup">
            <div class="logo anton">MORELLO SIMS</div>
            <div class="logo-tag mono">NBA + MLB</div>
        </div>
        <div class="status-indicators">
            <div class="status-group">
                <span class="status-emoji">&#9918;</span>
                <div class="status-tooltip" data-label="MLB SIM">
                    <div class="status-dot mlb-sim"></div>
                </div>
                <div class="status-tooltip" data-label="MLB ATLAS">
                    <div class="status-dot mlb-atlas"></div>
                </div>
            </div>
            <div class="status-group">
                <span class="status-emoji">&#127936;</span>
                <div class="status-tooltip" data-label="NBA SIM">
                    <div class="status-dot nba-sim"></div>
                </div>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="hero-subtitle mono">
            sports simulation &times; design &times; methodology
        </div>

        <div class="dashboard-grid">

            <article class="card card-nba">
                <div class="last-updated mono">UPDATED: FEB 16</div>
                <div class="card-header">
                    <h2 class="card-title bebas">NBA SIM</h2>
                    <p class="card-meta mono">DAILY MATCHUP SIMULATIONS &times; PLAYER PROPS &times; SCHEME ANALYSIS</p>
                </div>
                <div class="data-preview mono">
                    <div class="data-row">
                        <div class="team-pair bebas">
                            <span>LAL</span> <span style="color:var(--accent-nba)">@</span> <span>GSW</span>
                        </div>
                        <div class="stat-val">O/U 234.5</div>
                        <div class="grade-badge grade-a">A</div>
                    </div>
                    <div class="data-row">
                        <div class="team-pair bebas">
                            <span>BOS</span> <span style="color:var(--accent-nba)">@</span> <span>MIA</span>
                        </div>
                        <div class="stat-val">BOS -4.5</div>
                        <div class="grade-badge grade-b">B</div>
                    </div>
                    <div class="data-row" style="border-bottom:none;">
                        <div class="team-pair bebas">
                            <span>PHX</span> <span style="color:var(--accent-nba)">@</span> <span>DAL</span>
                        </div>
                        <div class="stat-val">PHX ML</div>
                        <div class="grade-badge grade-c">C</div>
                    </div>
                </div>
                <a href="https://jack-more.github.io/nbasim/" class="btn-action btn-nba mono">OPEN DASHBOARD &rarr;</a>
            </article>

            <article class="card card-mlb">
                <div class="last-updated mono">UPDATED: FEB 16</div>
                <div class="card-header">
                    <h2 class="card-title anton">MLB SIM</h2>
                    <p class="card-meta mono">PITCHING MATCHUPS &times; BATTING PROPS &times; SITUATIONAL EDGES</p>
                </div>
                <div class="data-preview mono">
                    <div class="data-row">
                        <div class="team-pair">
                            <span style="font-weight:bold">NYY</span> vs <span style="font-weight:bold">BOS</span>
                        </div>
                        <div class="stat-val">Cole (R)</div>
                        <div class="mlb-badge">EV+</div>
                    </div>
                    <div class="data-row">
                        <div class="team-pair">
                            <span style="font-weight:bold">LAD</span> vs <span style="font-weight:bold">SDP</span>
                        </div>
                        <div class="stat-val">Glasnow (R)</div>
                        <div class="mlb-badge" style="background:#ddd">N/A</div>
                    </div>
                    <div class="data-row" style="border-bottom:none;">
                        <div class="team-pair">
                            <span style="font-weight:bold">ATL</span> vs <span style="font-weight:bold">PHI</span>
                        </div>
                        <div class="stat-val">Strider (R)</div>
                        <div class="mlb-badge" style="background:var(--accent-mlb)">HOT</div>
                    </div>
                </div>
                <a href="https://jack-more.github.io/MLB_PitcherChart/mlbsim.html" class="btn-action btn-mlb">OPEN DASHBOARD &rarr;</a>
            </article>
        </div>
        <div class="log-divider">
            <span class="log-label mono uppercase">DISPATCH_LOG</span>
        </div>

        <div class="blog-feed">

            <!-- ═══════════════════════════════════════════════════ -->
            <!-- BLOG POST 1: MLB SIM + ATLAS                      -->
            <!-- ═══════════════════════════════════════════════════ -->
            <details class="blog-card post-mlb" id="post-mlb-system">
                <summary>
                    <div class="blog-meta mono">
                        <span class="blog-date">FEB 16, 2026</span>
                        <div class="blog-system-dots">
                            <div class="blog-system-dot dot-mlb-sim" title="MLB SIM"></div>
                            <div class="blog-system-dot dot-mlb-atlas" title="MLB ATLAS"></div>
                        </div>
                    </div>
                    <h3 class="blog-title bebas">BUILDING THE MLB PITCHER ARCHETYPE ENGINE: DATA DESIGN &amp; SYSTEM ARCHITECTURE</h3>
                    <p class="blog-preview">
                        A deep dive into how we designed the 8-step data pipeline that transforms raw Statcast pitch-level telemetry into a 3D galaxy of pitcher archetypes. From SV reclassification to K-Means clustering, hitter-vs-cluster matchup matrices, and the Three.js cosmos visualization.
                    </p>
                </summary>
                <div class="blog-card-body">
                <!-- MLB SYSTEM DIAGRAM: FULL PIPELINE -->
                <div class="diagram-label mono">FIG. 01: MLB PIPELINE &mdash; END-TO-END DATA FLOW</div>
                <div class="system-diagram">
                    <svg viewBox="0 0 860 640" xmlns="http://www.w3.org/2000/svg" style="background:#080808">
                        <defs>
                            <marker id="mlb-a" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#FFEA00"/></marker>
                            <marker id="atl-a" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#FF6B00"/></marker>
                            <pattern id="mlb-grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1a1a1a" stroke-width="0.5"/></pattern>
                            <filter id="mlb-glow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        </defs>
                        <rect width="860" height="640" fill="url(#mlb-grid)"/>
                        <!-- Scanlines -->
                        <line x1="0" y1="0" x2="860" y2="0" stroke="#FFEA00" stroke-width="3" opacity="0.6"/>
                        <line x1="0" y1="639" x2="860" y2="639" stroke="#FF6B00" stroke-width="2" opacity="0.4"/>
                        <!-- Title block -->
                        <rect x="0" y="8" width="860" height="38" fill="#111"/>
                        <text x="20" y="34" fill="#FFEA00" font-family="monospace" font-size="14" font-weight="bold" letter-spacing="4">MLB PITCHER ARCHETYPE PIPELINE</text>
                        <text x="840" y="34" fill="#555" font-family="monospace" font-size="9" text-anchor="end">8 STEPS &bull; PYTHON</text>
                        <!-- Horizontal rule -->
                        <line x1="0" y1="50" x2="860" y2="50" stroke="#FFEA00" stroke-width="2" opacity="0.3"/>

                        <!-- ── LAYER 1: INGESTION ── -->
                        <rect x="16" y="60" width="4" height="14" fill="#FFEA00"/>
                        <text x="28" y="72" fill="#FFEA00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">LAYER 1: INGESTION</text>
                        <!-- Source boxes — brutalist hard edges, thick borders -->
                        <rect x="20" y="84" width="200" height="60" fill="#111" stroke="#FFEA00" stroke-width="2.5"/>
                        <text x="120" y="108" fill="#FFEA00" font-family="monospace" font-size="13" text-anchor="middle" font-weight="bold">STATCAST API</text>
                        <text x="120" y="126" fill="#888" font-family="monospace" font-size="9" text-anchor="middle">pybaseball &bull; pitch-level data</text>
                        <rect x="240" y="84" width="200" height="60" fill="#111" stroke="#FF6B00" stroke-width="2.5"/>
                        <text x="340" y="108" fill="#FF6B00" font-family="monospace" font-size="13" text-anchor="middle" font-weight="bold">BASEBALL SAVANT</text>
                        <text x="340" y="126" fill="#888" font-family="monospace" font-size="9" text-anchor="middle">2015&ndash;2026 &bull; ~700K pitches/yr</text>
                        <rect x="460" y="84" width="180" height="60" fill="#111" stroke="#444" stroke-width="2"/>
                        <text x="550" y="108" fill="#ccc" font-family="monospace" font-size="13" text-anchor="middle">ROSTER DATA</text>
                        <text x="550" y="126" fill="#666" font-family="monospace" font-size="9" text-anchor="middle">Teams &bull; Rosters &bull; WBC</text>
                        <!-- Down arrow -->
                        <line x1="220" y1="144" x2="220" y2="170" stroke="#FFEA00" stroke-width="2.5" marker-end="url(#mlb-a)"/>
                        <!-- Parquet storage bar -->
                        <rect x="60" y="176" width="520" height="34" fill="#151515" stroke="#FFEA00" stroke-width="1.5" stroke-dasharray="6,3"/>
                        <text x="320" y="198" fill="#FFEA00" font-family="monospace" font-size="12" text-anchor="middle" filter="url(#mlb-glow)">statcast_{year}.parquet &mdash; ~150 MB/season &bull; Snappy compressed</text>

                        <!-- ── LAYER 2: FEATURE ENGINEERING ── -->
                        <line x1="320" y1="210" x2="320" y2="238" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a)"/>
                        <rect x="16" y="244" width="4" height="14" fill="#FFEA00"/>
                        <text x="28" y="256" fill="#FFEA00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">LAYER 2: FEATURE ENGINEERING</text>
                        <!-- 4 step boxes — industrial card style -->
                        <rect x="20" y="268" width="150" height="76" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="20" y="268" width="150" height="20" fill="#FFEA00"/><text x="95" y="282" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">01 FETCH</text>
                        <text x="95" y="304" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">Month-chunked pulls</text>
                        <text x="95" y="318" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">Retry w/ backoff</text>
                        <text x="95" y="336" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">59 columns kept</text>
                        <line x1="170" y1="306" x2="190" y2="306" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a)"/>
                        <rect x="194" y="268" width="150" height="76" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="194" y="268" width="150" height="20" fill="#FFEA00"/><text x="269" y="282" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">02 ROLES</text>
                        <text x="269" y="304" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">SP/RP classification</text>
                        <text x="269" y="318" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">Games started ratio</text>
                        <text x="269" y="336" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Binary: is_sp</text>
                        <line x1="344" y1="306" x2="364" y2="306" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a)"/>
                        <rect x="368" y="268" width="150" height="76" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="368" y="268" width="150" height="20" fill="#FFEA00"/><text x="443" y="282" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">03 FEATURES</text>
                        <text x="443" y="304" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">Pitch mix (10 types)</text>
                        <text x="443" y="318" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">Velo, spin, whiff, arm</text>
                        <text x="443" y="336" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">SV reclassification</text>
                        <line x1="518" y1="306" x2="538" y2="306" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a)"/>
                        <rect x="542" y="268" width="150" height="76" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="542" y="268" width="150" height="20" fill="#FFEA00"/><text x="617" y="282" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">ZONE LOC</text>
                        <text x="617" y="304" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">Same/opp side splits</text>
                        <text x="617" y="318" fill="#bbb" font-family="monospace" font-size="8" text-anchor="middle">9-quadrant entropy</text>
                        <text x="617" y="336" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">13 zone features</text>

                        <!-- Feature vector output -->
                        <line x1="380" y1="344" x2="380" y2="372" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a)"/>
                        <rect x="80" y="378" width="600" height="32" fill="#1a1500" stroke="#FFEA00" stroke-width="2.5"/>
                        <text x="380" y="400" fill="#FFEA00" font-family="monospace" font-size="12" text-anchor="middle" font-weight="bold" filter="url(#mlb-glow)">PITCHER-SEASON FEATURE VECTOR (14 DIMENSIONS)</text>
                        <text x="720" y="390" fill="#555" font-family="monospace" font-size="7">pct_FF, pct_SI, pct_FC,</text>
                        <text x="720" y="400" fill="#555" font-family="monospace" font-size="7">pct_SL, pct_CH, pct_CU,</text>
                        <text x="720" y="410" fill="#555" font-family="monospace" font-size="7">velo, spin, gb, whiff...</text>

                        <!-- ── LAYER 3: CLUSTERING ── -->
                        <line x1="380" y1="410" x2="380" y2="436" stroke="#FF6B00" stroke-width="2" marker-end="url(#atl-a)"/>
                        <rect x="16" y="442" width="4" height="14" fill="#FF6B00"/>
                        <text x="28" y="454" fill="#FF6B00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">LAYER 3: CLUSTERING &amp; CLASSIFICATION</text>
                        <rect x="20" y="466" width="220" height="80" fill="#0e0e0e" stroke="#FF6B00" stroke-width="2.5"/>
                        <rect x="20" y="466" width="220" height="22" fill="#FF6B00"/><text x="130" y="482" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">04 K-MEANS CLUSTERING</text>
                        <text x="130" y="504" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">RHP / LHP split independently</text>
                        <text x="130" y="518" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">StandardScaler &rarr; Silhouette opt</text>
                        <text x="130" y="532" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Min K=8 &bull; 3D PCA &bull; X-offset &plusmn;5</text>
                        <line x1="240" y1="506" x2="264" y2="506" stroke="#FF6B00" stroke-width="2" marker-end="url(#atl-a)"/>
                        <rect x="268" y="466" width="220" height="80" fill="#0e0e0e" stroke="#FF6B00" stroke-width="2.5"/>
                        <rect x="268" y="466" width="220" height="22" fill="#FF6B00"/><text x="378" y="482" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">05 ARCHETYPE NAMING</text>
                        <text x="378" y="504" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Geometric medoid (real pitcher)</text>
                        <text x="378" y="518" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Rule-based trait scoring</text>
                        <text x="378" y="532" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">17 names: Snake, Ghost, Barnburner</text>
                        <line x1="488" y1="506" x2="512" y2="506" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a)"/>
                        <rect x="516" y="466" width="220" height="80" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="516" y="466" width="220" height="22" fill="#FFEA00"/><text x="626" y="482" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">06-08 MATCHUP ANALYTICS</text>
                        <text x="626" y="504" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Hitter vs Cluster (wOBA, K%, BB%)</text>
                        <text x="626" y="518" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Hitter vs Pitcher (head-to-head)</text>
                        <text x="626" y="532" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Hitter Timing Archetypes</text>

                        <!-- ── LAYER 4: FRONTEND ── -->
                        <line x1="380" y1="546" x2="380" y2="572" stroke="#FF6B00" stroke-width="2" marker-end="url(#atl-a)"/>
                        <rect x="16" y="578" width="4" height="14" fill="#FF6B00"/>
                        <text x="28" y="590" fill="#FF6B00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">LAYER 4: FRONTEND DELIVERY</text>
                        <rect x="20" y="600" width="250" height="30" fill="#1a0e00" stroke="#FF6B00" stroke-width="2"/>
                        <text x="145" y="620" fill="#FF6B00" font-family="monospace" font-size="11" text-anchor="middle" font-weight="bold">COSMOS ATLAS &bull; Three.js</text>
                        <rect x="290" y="600" width="250" height="30" fill="#1a1500" stroke="#FFEA00" stroke-width="2"/>
                        <text x="415" y="620" fill="#FFEA00" font-family="monospace" font-size="11" text-anchor="middle" font-weight="bold">MLB SIM &bull; React</text>
                        <rect x="560" y="600" width="180" height="30" fill="#111" stroke="#444" stroke-width="1.5"/>
                        <text x="650" y="620" fill="#999" font-family="monospace" font-size="10" text-anchor="middle">Vite &rarr; GitHub Pages</text>
                        <!-- Bottom accent -->
                        <line x1="0" y1="638" x2="860" y2="638" stroke="#FF6B00" stroke-width="2" opacity="0.4"/>

                        <!-- Tech pill badges -->
                        <rect x="756" y="84" width="80" height="20" fill="#FFEA00" rx="0"/><text x="796" y="98" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">Python</text>
                        <rect x="756" y="110" width="80" height="20" fill="#FF6B00" rx="0"/><text x="796" y="124" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">sklearn</text>
                        <rect x="756" y="136" width="80" height="20" fill="#222" stroke="#666" stroke-width="1" rx="0"/><text x="796" y="150" fill="#ccc" font-family="monospace" font-size="9" text-anchor="middle">pandas</text>
                        <rect x="756" y="162" width="80" height="20" fill="#222" stroke="#666" stroke-width="1" rx="0"/><text x="796" y="176" fill="#ccc" font-family="monospace" font-size="9" text-anchor="middle">Three.js</text>
                        <rect x="756" y="188" width="80" height="20" fill="#222" stroke="#666" stroke-width="1" rx="0"/><text x="796" y="202" fill="#ccc" font-family="monospace" font-size="9" text-anchor="middle">Parquet</text>
                    </svg>
                </div>

                <h4 class="blog-section-header bebas">THE 8-STEP PIPELINE</h4>
                <p class="blog-body-text mlb">
                    The MLB system is an <strong>8-step sequential pipeline</strong> built in Python, orchestrated by <code>run_all.py</code>. Each step reads the previous step's output and writes its own artifacts. The entire pipeline can be resumed from any step with <code>--from N</code>.
                </p>

                <div class="pipeline-step mlb">
                    <span class="step-num">01</span>
                    <span class="step-text"><strong>Fetch Statcast</strong> &mdash; Pulls pitch-level telemetry from Baseball Savant via <code>pybaseball</code>. Data is chunked by month (Mar-Oct) with retry logic and polite 2s delays. Each season yields ~700K pitches across 59 columns including release speed, spin rate, pitch movement (pfx_x/pfx_z), plate location, and batted ball outcomes. Saved as compressed Parquet files (~150MB/season).</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">02</span>
                    <span class="step-text"><strong>Classify SP/RP Roles</strong> &mdash; Determines whether each pitcher-season is a Starter or Reliever based on games-started ratio. Produces a binary <code>is_sp</code> flag used downstream for role-aware archetype naming.</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">03</span>
                    <span class="step-text"><strong>Feature Engineering</strong> &mdash; The heaviest step. Aggregates pitch-level data into pitcher-season feature vectors. Computes: <strong>pitch mix usage rates</strong> (10 types), <strong>SV reclassification</strong> (SV pitches mapped to CU/SL/ST per pitcher based on velocity and vertical break), spin rates, arm angle (derived from release point geometry), whiff rate, fastball velocity, groundball rate, zone rate, pitch movement vectors, and a <strong>13-feature zone location layer</strong> with same-side/opposite-side splits, platoon shifts, and Shannon entropy of 9-quadrant distributions.</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">04</span>
                    <span class="step-text"><strong>K-Means Clustering</strong> &mdash; Pitchers are split by handedness (RHP/LHP) and clustered independently. Features are StandardScaled, then K-Means is run across K=2-15 with silhouette score optimization (minimum K=8 enforced for meaningful granularity). Each hand produces ~8-12 clusters. A 3D PCA projection is computed for the Atlas galaxy view, with RHP offset +5 on the X axis and LHP offset -5 to create visual separation.</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">05</span>
                    <span class="step-text"><strong>Archetype Naming</strong> &mdash; Each cluster's geometric medoid (the real pitcher minimizing sum of distances to all cluster members) is identified. A rule-based trait scorer examines the medoid's pitch mix, velocity, spin, and outcomes to assign one of 17 archetype names: Snake, Barnburner, Ghost, Earthworm, Swordfighter, Kitchen Sink, and more. Each archetype gets a consistent color and emoji for the frontend.</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">06</span>
                    <span class="step-text"><strong>Hitter vs Cluster</strong> &mdash; Every pitch is tagged with its pitcher's cluster ID. Plate appearance outcomes are aggregated per batter &times; cluster &times; year &times; batter-side, producing wOBA, BA, SLG, K%, BB%, and whiff% for each matchup combination.</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">07</span>
                    <span class="step-text"><strong>Hitter vs Pitcher</strong> &mdash; Direct head-to-head stats between individual batters and pitchers, providing granular matchup data beyond the cluster-level aggregations.</span>
                </div>
                <div class="pipeline-step mlb">
                    <span class="step-num">08</span>
                    <span class="step-text"><strong>Hitter Timing Archetypes</strong> &mdash; Classifies hitters by their timing and approach patterns against different pitch types and velocities, adding another dimension to the matchup analysis.</span>
                </div>

                <!-- MLB ATLAS DIAGRAM -->
                <div class="diagram-label mono" style="margin-top:24px">FIG. 02: COSMOS ATLAS &mdash; 3D VISUALIZATION ARCHITECTURE</div>
                <div class="system-diagram">
                    <svg viewBox="0 0 860 440" xmlns="http://www.w3.org/2000/svg" style="background:#080808">
                        <defs>
                            <pattern id="atl-grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1a1a1a" stroke-width="0.5"/></pattern>
                            <marker id="atl-a2" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#FF6B00"/></marker>
                            <marker id="mlb-a2" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#FFEA00"/></marker>
                            <filter id="atl-glow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        </defs>
                        <rect width="860" height="440" fill="url(#atl-grid)"/>
                        <line x1="0" y1="0" x2="860" y2="0" stroke="#FF6B00" stroke-width="3" opacity="0.6"/>
                        <!-- Title -->
                        <rect x="0" y="8" width="860" height="38" fill="#111"/>
                        <text x="20" y="34" fill="#FF6B00" font-family="monospace" font-size="14" font-weight="bold" letter-spacing="4">COSMOS ATLAS &mdash; 3D PITCHER GALAXY</text>
                        <text x="840" y="34" fill="#555" font-family="monospace" font-size="9" text-anchor="end">React + Three.js</text>
                        <line x1="0" y1="50" x2="860" y2="50" stroke="#FF6B00" stroke-width="2" opacity="0.3"/>

                        <!-- DATA LAYER -->
                        <rect x="16" y="60" width="4" height="14" fill="#FF6B00"/>
                        <text x="28" y="72" fill="#FF6B00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">DATA FILES (JSON)</text>

                        <rect x="20" y="84" width="200" height="72" fill="#111" stroke="#FF6B00" stroke-width="2.5"/>
                        <rect x="20" y="84" width="200" height="20" fill="#FF6B00"/><text x="120" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">clusters.json</text>
                        <text x="120" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Archetype profiles + colors</text>
                        <text x="120" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Medoid PCA (x,y,z) positions</text>
                        <text x="120" y="148" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Emoji, velo, whiff, GB%</text>

                        <rect x="240" y="84" width="200" height="72" fill="#111" stroke="#FF6B00" stroke-width="2.5"/>
                        <rect x="240" y="84" width="200" height="20" fill="#FF6B00"/><text x="340" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">pitcher_seasons.json</text>
                        <text x="340" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Every pitcher-season 2015-26</text>
                        <text x="340" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">PCA x, y, z coordinates</text>
                        <text x="340" y="148" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Name, hand, cluster ID</text>

                        <rect x="460" y="84" width="200" height="72" fill="#111" stroke="#FFEA00" stroke-width="2.5"/>
                        <rect x="460" y="84" width="200" height="20" fill="#FFEA00"/><text x="560" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">hitter_vs_cluster.json</text>
                        <text x="560" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Batter vs archetype stats</text>
                        <text x="560" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">wOBA, BA, SLG, K%, BB%</text>
                        <text x="560" y="148" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Min 10 PA threshold</text>

                        <rect x="680" y="84" width="160" height="72" fill="#111" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="680" y="84" width="160" height="20" fill="#FFEA00"/><text x="760" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">batters.json</text>
                        <text x="760" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">MLB batter directory</text>
                        <text x="760" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Name, ID, team, side</text>
                        <text x="760" y="148" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Autocomplete search</text>

                        <!-- Down to app -->
                        <line x1="380" y1="156" x2="380" y2="182" stroke="#FF6B00" stroke-width="2" marker-end="url(#atl-a2)"/>

                        <!-- APP LAYER -->
                        <rect x="16" y="188" width="4" height="14" fill="#FF6B00"/>
                        <text x="28" y="200" fill="#FF6B00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">REACT APPLICATION (VITE)</text>

                        <rect x="20" y="210" width="820" height="34" fill="#151005" stroke="#FF6B00" stroke-width="2"/>
                        <text x="430" y="232" fill="#FF6B00" font-family="monospace" font-size="12" text-anchor="middle" font-weight="bold" filter="url(#atl-glow)">App.jsx &mdash; State: activeBatters[] &bull; selectedStat &bull; selectedYear &bull; minPA &bull; visibleClusters &bull; showPitcherDots</text>

                        <!-- Down to render -->
                        <line x1="260" y1="244" x2="260" y2="270" stroke="#FF6B00" stroke-width="2" marker-end="url(#atl-a2)"/>
                        <line x1="560" y1="244" x2="560" y2="270" stroke="#FFEA00" stroke-width="2" marker-end="url(#mlb-a2)"/>

                        <!-- RENDER LAYER -->
                        <rect x="16" y="274" width="4" height="14" fill="#FF6B00"/>
                        <text x="28" y="286" fill="#FF6B00" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">RENDER COMPONENTS</text>

                        <rect x="20" y="296" width="260" height="80" fill="#0e0e0e" stroke="#FF6B00" stroke-width="2.5"/>
                        <rect x="20" y="296" width="260" height="22" fill="#FF6B00"/><text x="150" y="312" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">GalaxyScene.jsx</text>
                        <text x="150" y="334" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Three.js WebGL Canvas</text>
                        <text x="150" y="348" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Pitcher dots at PCA (x,y,z)</text>
                        <text x="150" y="362" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Archetype nebula clusters (color-coded)</text>
                        <text x="150" y="374" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Batter matchup lines to each cluster</text>

                        <rect x="300" y="296" width="200" height="80" fill="#0e0e0e" stroke="#FF6B00" stroke-width="2"/>
                        <rect x="300" y="296" width="200" height="22" fill="#FF6B00"/><text x="400" y="312" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">ControlBar.jsx</text>
                        <text x="400" y="334" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Year filter dropdown</text>
                        <text x="400" y="348" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Min PA slider</text>
                        <text x="400" y="362" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Stat selector (wOBA, K%...)</text>
                        <text x="400" y="374" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Cluster visibility toggles</text>

                        <rect x="520" y="296" width="160" height="80" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="520" y="296" width="160" height="22" fill="#FFEA00"/><text x="600" y="312" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">StatPanel.jsx</text>
                        <text x="600" y="334" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Matchup stat overlay</text>
                        <text x="600" y="348" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Red &rarr; green gradient</text>
                        <text x="600" y="362" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">by selected stat</text>
                        <text x="600" y="374" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Up to 5 batters</text>

                        <rect x="700" y="296" width="140" height="80" fill="#0e0e0e" stroke="#FFEA00" stroke-width="2"/>
                        <rect x="700" y="296" width="140" height="22" fill="#FFEA00"/><text x="770" y="312" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">BatterSearch.jsx</text>
                        <text x="770" y="334" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Autocomplete search</text>
                        <text x="770" y="348" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">batters.json lookup</text>
                        <text x="770" y="362" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Add to activeBatters</text>
                        <text x="770" y="374" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Max 5 simultaneous</text>

                        <!-- OUTPUT -->
                        <line x1="380" y1="376" x2="380" y2="402" stroke="#FF6B00" stroke-width="2" marker-end="url(#atl-a2)"/>
                        <rect x="120" y="406" width="520" height="26" fill="#1a0e00" stroke="#FF6B00" stroke-width="2.5"/>
                        <text x="380" y="424" fill="#FF6B00" font-family="monospace" font-size="12" text-anchor="middle" font-weight="bold" filter="url(#atl-glow)">cosmos.html &mdash; GitHub Pages &bull; Static &bull; No server &bull; All data baked in</text>
                        <line x1="0" y1="438" x2="860" y2="438" stroke="#FF6B00" stroke-width="2" opacity="0.4"/>
                    </svg>
                </div>

                <h4 class="blog-section-header bebas">KEY DESIGN DECISIONS</h4>
                <p class="blog-body-text mlb">
                    <strong>SV Reclassification:</strong> Statcast's "SV" (sweeper) classification is inconsistent across seasons. We built a per-pitcher mapping that examines career-average SV velocity and vertical break to reclassify each pitcher's SV as curveball (pfx_z &lt; -0.50), slider (speed &gt; 84 mph), or sweeper (everything else). This ensures clustering stability across the 2015-2026 dataset.
                </p>
                <p class="blog-body-text mlb">
                    <strong>Separate RHP/LHP Clustering:</strong> Rather than clustering all pitchers together, we split by handedness first. This prevents the dominant handedness signal from overwhelming the pitch-mix features. Each hand gets its own StandardScaler, K-Means model, and PCA projection. The X-axis offset (+5/-5) in PCA space creates the visual "galaxy" separation in the Atlas view.
                </p>
                <p class="blog-body-text mlb">
                    <strong>Medoid over Centroid:</strong> Archetype representatives are chosen as the geometric medoid (the real pitcher that minimizes total distance to all cluster members), not the mathematical centroid. This means every archetype profile references an actual pitcher's stats, not a phantom average that no real pitcher matches.
                </p>
                <p class="blog-body-text mlb">
                    <strong>Zone Location Entropy:</strong> The 13-feature zone location layer captures not just where pitchers throw, but how predictable their patterns are. Shannon entropy across a 9-quadrant grid (3 lateral &times; 3 vertical) measures location unpredictability, and platoon shift features capture how much a pitcher adjusts against same-side vs opposite-side batters.
                </p>

                <div class="blog-tags mono">
                    <span class="tag">METHODOLOGY</span>
                    <span class="tag">MLB</span>
                    <span class="tag">ATLAS</span>
                    <span class="tag">DATA ARCHITECTURE</span>
                    <span class="tag">DEVLOG</span>
                </div>
                </div>
            </details>


            <!-- ═══════════════════════════════════════════════════ -->
            <!-- BLOG POST 2: NBA SIM                              -->
            <!-- ═══════════════════════════════════════════════════ -->
            <details class="blog-card post-nba" id="post-nba-system">
                <summary>
                    <div class="blog-meta mono">
                        <span class="blog-date">FEB 16, 2026</span>
                        <div class="blog-system-dots">
                            <div class="blog-system-dot dot-nba-sim" title="NBA SIM"></div>
                        </div>
                    </div>
                    <h3 class="blog-title bebas">NBA SIM: MULTI-LAYER PREDICTION ENGINE &mdash; FROM NBA API TO GAME PREDICTIONS</h3>
                    <p class="blog-preview">
                        How we built a 4-phase pipeline that ingests NBA player tracking data, classifies coaching schemes via percentile-rank play type analysis, clusters players into position-specific archetypes using weighted K-Means, computes multi-level synergy scores, and generates spread/total predictions against live betting lines.
                    </p>
                </summary>
                <div class="blog-card-body">
                <!-- NBA SYSTEM DIAGRAM: FULL PIPELINE -->
                <div class="diagram-label mono">FIG. 03: NBA SIM &mdash; COMPLETE SYSTEM ARCHITECTURE</div>
                <div class="system-diagram">
                    <svg viewBox="0 0 860 820" xmlns="http://www.w3.org/2000/svg" style="background:#080808">
                        <defs>
                            <marker id="nba-a" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#00FF55"/></marker>
                            <marker id="nba-a2" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#00cc44"/></marker>
                            <pattern id="nba-grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1a1a1a" stroke-width="0.5"/></pattern>
                            <filter id="nba-glow"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        </defs>
                        <rect width="860" height="820" fill="url(#nba-grid)"/>
                        <!-- Scanlines -->
                        <line x1="0" y1="0" x2="860" y2="0" stroke="#00FF55" stroke-width="3" opacity="0.6"/>
                        <line x1="0" y1="819" x2="860" y2="819" stroke="#00FF55" stroke-width="2" opacity="0.4"/>
                        <!-- Title block -->
                        <rect x="0" y="8" width="860" height="38" fill="#111"/>
                        <text x="20" y="34" fill="#00FF55" font-family="monospace" font-size="14" font-weight="bold" letter-spacing="4">NBA SIM &mdash; MULTI-LAYER PREDICTION ENGINE</text>
                        <text x="840" y="34" fill="#555" font-family="monospace" font-size="9" text-anchor="end">4 PHASES &bull; PYTHON + SKLEARN</text>
                        <line x1="0" y1="50" x2="860" y2="50" stroke="#00FF55" stroke-width="2" opacity="0.3"/>

                        <!-- ── PHASE 1: COLLECT ── -->
                        <rect x="16" y="60" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="72" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">PHASE 1: COLLECT (6 COLLECTORS)</text>

                        <!-- nba_api -->
                        <rect x="20" y="86" width="130" height="76" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="86" width="130" height="20" fill="#00FF55"/><text x="85" y="100" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">nba_api</text>
                        <text x="85" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Teams, Rosters</text>
                        <text x="85" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Season Stats</text>
                        <text x="85" y="148" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Rate limited: 2s</text>

                        <!-- Game Data -->
                        <rect x="160" y="86" width="130" height="76" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="160" y="86" width="130" height="20" fill="#00FF55"/><text x="225" y="100" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">GAME DATA</text>
                        <text x="225" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Scores, Box Scores</text>
                        <text x="225" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">27 stat columns/game</text>
                        <text x="225" y="148" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Per-game + advanced</text>

                        <!-- Lineups -->
                        <rect x="300" y="86" width="130" height="76" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="300" y="86" width="130" height="20" fill="#00FF55"/><text x="365" y="100" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">LINEUPS</text>
                        <text x="365" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">2-man through 5-man</text>
                        <text x="365" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Net rating, possessions</text>
                        <text x="365" y="148" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Min poss thresholds</text>

                        <!-- Play Types -->
                        <rect x="440" y="86" width="130" height="76" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="440" y="86" width="130" height="20" fill="#00FF55"/><text x="505" y="100" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">PLAY TYPES</text>
                        <text x="505" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">SynergyPlayTypes API</text>
                        <text x="505" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">11 types &times; Off/Def</text>
                        <text x="505" y="148" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">PPP, freq%, TO%, FG%</text>

                        <!-- Box Scores -->
                        <rect x="580" y="86" width="130" height="76" fill="#0e0e0e" stroke="#00FF55" stroke-width="2"/>
                        <rect x="580" y="86" width="130" height="20" fill="#00FF55"/><text x="645" y="100" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">BOX SCORES</text>
                        <text x="645" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Player per-game</text>
                        <text x="645" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">USG%, TS%, OРТG, PIE</text>
                        <text x="645" y="148" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">27 columns each</text>

                        <!-- Odds API -->
                        <rect x="720" y="86" width="120" height="76" fill="#0e0e0e" stroke="#00cc44" stroke-width="2"/>
                        <rect x="720" y="86" width="120" height="20" fill="#00cc44"/><text x="780" y="100" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">ODDS API</text>
                        <text x="780" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">the-odds-api.com</text>
                        <text x="780" y="132" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Spreads + Totals</text>
                        <text x="780" y="148" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Multi-book consensus</text>

                        <!-- Down arrows to DB -->
                        <line x1="225" y1="162" x2="225" y2="186" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>
                        <line x1="505" y1="162" x2="505" y2="186" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>

                        <!-- Database bar -->
                        <rect x="60" y="192" width="640" height="36" fill="#001a0a" stroke="#00FF55" stroke-width="2.5"/>
                        <text x="380" y="216" fill="#00FF55" font-family="monospace" font-size="13" text-anchor="middle" font-weight="bold" filter="url(#nba-glow)">SQLite &mdash; nba_sim.db &mdash; 17 TABLES</text>
                        <text x="740" y="206" fill="#555" font-family="monospace" font-size="7">player_game_stats</text>
                        <text x="740" y="216" fill="#555" font-family="monospace" font-size="7">lineup_stats (2-5 man)</text>
                        <text x="740" y="226" fill="#555" font-family="monospace" font-size="7">team/player_playtypes</text>

                        <!-- ── PHASE 2: ANALYZE ── -->
                        <line x1="380" y1="228" x2="380" y2="256" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>
                        <rect x="16" y="264" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="276" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">PHASE 2: ANALYZE (2 ENGINES)</text>

                        <!-- Coaching Scheme Classifier -->
                        <rect x="20" y="290" width="400" height="148" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="290" width="400" height="22" fill="#00FF55"/><text x="220" y="306" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">COACHING SCHEME CLASSIFIER</text>

                        <text x="40" y="328" fill="#00FF55" font-family="monospace" font-size="9" font-weight="bold">OFFENSIVE</text>
                        <text x="40" y="342" fill="#bbb" font-family="monospace" font-size="8">PnR-Heavy, ISO-Heavy</text>
                        <text x="40" y="356" fill="#bbb" font-family="monospace" font-size="8">Motion, Run-and-Gun</text>
                        <text x="40" y="370" fill="#bbb" font-family="monospace" font-size="8">Spot-Up, Post-Oriented</text>
                        <text x="40" y="386" fill="#666" font-family="monospace" font-size="7">+ Pace (Fast/Mid/Slow)</text>

                        <line x1="220" y1="318" x2="220" y2="400" stroke="#333" stroke-width="1" stroke-dasharray="3,2"/>

                        <text x="234" y="328" fill="#00FF55" font-family="monospace" font-size="9" font-weight="bold">DEFENSIVE</text>
                        <text x="234" y="342" fill="#bbb" font-family="monospace" font-size="8">Switch-Everything</text>
                        <text x="234" y="356" fill="#bbb" font-family="monospace" font-size="8">Drop-Coverage, Rim-Protect</text>
                        <text x="234" y="370" fill="#bbb" font-family="monospace" font-size="8">Trans-Defense, Blitz</text>
                        <text x="234" y="386" fill="#666" font-family="monospace" font-size="7">PPP inversion: low = good D</text>

                        <text x="40" y="410" fill="#555" font-family="monospace" font-size="7">Method: freq/PPP pivot &rarr; percentile-rank across 30 teams &rarr; weighted scheme scoring</text>
                        <text x="40" y="424" fill="#555" font-family="monospace" font-size="7">Quality tiers: Elite / Good / Average / Poor</text>

                        <!-- Player Archetype Clusterer -->
                        <rect x="436" y="290" width="404" height="148" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="436" y="290" width="404" height="22" fill="#00FF55"/><text x="638" y="306" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">PLAYER ARCHETYPE CLUSTERER</text>

                        <text x="456" y="328" fill="#00FF55" font-family="monospace" font-size="9" font-weight="bold">PER-POSITION K-MEANS</text>
                        <text x="456" y="342" fill="#bbb" font-family="monospace" font-size="8">PG: Floor General, Scoring Guard</text>
                        <text x="456" y="356" fill="#bbb" font-family="monospace" font-size="8">SG: Sharpshooter, Two-Way Wing</text>
                        <text x="456" y="370" fill="#bbb" font-family="monospace" font-size="8">C: Rim Protector, Stretch 5</text>
                        <text x="456" y="386" fill="#666" font-family="monospace" font-size="7">5 positions clustered independently</text>

                        <line x1="638" y1="318" x2="638" y2="400" stroke="#333" stroke-width="1" stroke-dasharray="3,2"/>

                        <text x="652" y="328" fill="#00FF55" font-family="monospace" font-size="9" font-weight="bold">METHODOLOGY</text>
                        <text x="652" y="342" fill="#bbb" font-family="monospace" font-size="8">Position-weighted features</text>
                        <text x="652" y="356" fill="#bbb" font-family="monospace" font-size="8">StandardScaler &rarr; PCA (8D)</text>
                        <text x="652" y="370" fill="#bbb" font-family="monospace" font-size="8">K=3-6 via silhouette</text>
                        <text x="652" y="386" fill="#666" font-family="monospace" font-size="7">K=4 bias when &Delta;sil &lt; 0.05</text>

                        <text x="456" y="410" fill="#555" font-family="monospace" font-size="7">Labels: Hungarian algorithm matches centroids to z-score direction vector templates</text>
                        <text x="456" y="424" fill="#555" font-family="monospace" font-size="7">Optimal bipartite matching &rarr; no manual label assignment needed</text>

                        <!-- ── PHASE 3: VALUE SCORES ── -->
                        <line x1="380" y1="438" x2="380" y2="464" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>
                        <rect x="16" y="472" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="484" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">PHASE 3: COMPOSITE VALUE SCORES</text>

                        <!-- Main value score container -->
                        <rect x="20" y="498" width="820" height="120" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="498" width="820" height="22" fill="#00FF55"/><text x="430" y="514" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">COMPOSITE VALUE SCORE ENGINE &mdash; SYNERGY + BASE + ARCHETYPE FIT</text>

                        <!-- 5 synergy weight boxes -->
                        <rect x="32" y="530" width="110" height="74" fill="#111" stroke="#00FF55" stroke-width="2"/>
                        <rect x="32" y="530" width="110" height="18" fill="#00FF55"/><text x="87" y="543" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">SOLO</text>
                        <text x="87" y="562" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Individual impact</text>
                        <text x="87" y="576" fill="#00FF55" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">w = 0.210</text>
                        <text x="87" y="594" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">Prior: 500 min</text>

                        <rect x="152" y="530" width="110" height="74" fill="#111" stroke="#00FF55" stroke-width="2"/>
                        <rect x="152" y="530" width="110" height="18" fill="#00dd44"/><text x="207" y="543" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">2-MAN</text>
                        <text x="207" y="562" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Pair synergy</text>
                        <text x="207" y="576" fill="#00dd44" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">w = 0.196</text>
                        <text x="207" y="594" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">Prior: 30 poss</text>

                        <rect x="272" y="530" width="110" height="74" fill="#111" stroke="#00FF55" stroke-width="2"/>
                        <rect x="272" y="530" width="110" height="18" fill="#00bb44"/><text x="327" y="543" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">3-MAN</text>
                        <text x="327" y="562" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Trio combos</text>
                        <text x="327" y="576" fill="#00bb44" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">w = 0.140</text>
                        <text x="327" y="594" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">Prior: 50 poss</text>

                        <rect x="392" y="530" width="110" height="74" fill="#111" stroke="#00FF55" stroke-width="2"/>
                        <rect x="392" y="530" width="110" height="18" fill="#009933"/><text x="447" y="543" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">4-MAN</text>
                        <text x="447" y="562" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Quad combos</text>
                        <text x="447" y="576" fill="#009933" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">w = 0.091</text>
                        <text x="447" y="594" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">Prior: 75 poss</text>

                        <rect x="512" y="530" width="110" height="74" fill="#111" stroke="#00FF55" stroke-width="2"/>
                        <rect x="512" y="530" width="110" height="18" fill="#007722"/><text x="567" y="543" fill="#fff" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">5-MAN</text>
                        <text x="567" y="562" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Full lineup</text>
                        <text x="567" y="576" fill="#007722" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">w = 0.063</text>
                        <text x="567" y="594" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">Prior: 100 poss</text>

                        <!-- Weight breakdown -->
                        <rect x="636" y="530" width="192" height="74" fill="#0a0a0a" stroke="#444" stroke-width="1.5"/>
                        <text x="732" y="548" fill="#00FF55" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">WEIGHT BREAKDOWN</text>
                        <text x="652" y="564" fill="#aaa" font-family="monospace" font-size="8">Synergy total:  70%</text>
                        <text x="652" y="578" fill="#aaa" font-family="monospace" font-size="8">Base value:     25%</text>
                        <text x="652" y="592" fill="#aaa" font-family="monospace" font-size="8">Archetype fit:   5%</text>
                        <text x="652" y="604" fill="#00FF55" font-family="monospace" font-size="7" filter="url(#nba-glow)">Bayesian shrinkage priors</text>

                        <!-- ── PHASE 4: PREDICT & DISPLAY ── -->
                        <line x1="380" y1="618" x2="380" y2="646" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>
                        <rect x="16" y="654" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="666" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">PHASE 4: PREDICT &amp; DISPLAY</text>

                        <!-- Prediction Engine -->
                        <rect x="20" y="680" width="260" height="80" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="680" width="260" height="22" fill="#00FF55"/><text x="150" y="696" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">PREDICTION ENGINE</text>
                        <text x="150" y="718" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Feature matrix from value scores</text>
                        <text x="150" y="732" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Spread + Total predictions</text>
                        <text x="150" y="746" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Edge = predicted &minus; market line</text>

                        <line x1="280" y1="720" x2="304" y2="720" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>

                        <!-- Backtester -->
                        <rect x="310" y="680" width="230" height="80" fill="#0e0e0e" stroke="#00FF55" stroke-width="2"/>
                        <rect x="310" y="680" width="230" height="22" fill="#00FF55"/><text x="425" y="696" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">BACKTESTER</text>
                        <text x="425" y="718" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Train on season N-1</text>
                        <text x="425" y="732" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Test on season N</text>
                        <text x="425" y="746" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">Spread/total correct %</text>

                        <line x1="540" y1="720" x2="564" y2="720" stroke="#00FF55" stroke-width="2.5" marker-end="url(#nba-a)"/>

                        <!-- Frontend -->
                        <rect x="570" y="680" width="270" height="80" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="570" y="680" width="270" height="22" fill="#00FF55"/><text x="705" y="696" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">FRONTEND DASHBOARD</text>
                        <text x="705" y="718" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">generate_frontend.py</text>
                        <text x="705" y="732" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">Single-file HTML &bull; Live odds</text>
                        <text x="705" y="746" fill="#666" font-family="monospace" font-size="8" text-anchor="middle">A/B/C grades &bull; GitHub Pages</text>

                        <!-- Output bar -->
                        <line x1="380" y1="760" x2="380" y2="780" stroke="#00FF55" stroke-width="2" marker-end="url(#nba-a)"/>
                        <rect x="80" y="786" width="600" height="26" fill="#001a0a" stroke="#00FF55" stroke-width="2.5"/>
                        <text x="380" y="804" fill="#00FF55" font-family="monospace" font-size="11" text-anchor="middle" font-weight="bold" filter="url(#nba-glow)">nbasim.html &mdash; GitHub Pages &bull; Static &bull; All data baked in</text>

                        <!-- Tech pill badges -->
                        <rect x="756" y="60" width="80" height="20" fill="#00FF55" rx="0"/><text x="796" y="74" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">Python</text>
                        <rect x="756" y="86" width="80" height="20" fill="#00cc44" rx="0"/><text x="796" y="100" fill="#000" font-family="monospace" font-size="9" text-anchor="middle" font-weight="bold">sklearn</text>
                        <rect x="756" y="112" width="80" height="20" fill="#222" stroke="#666" stroke-width="1" rx="0"/><text x="796" y="126" fill="#ccc" font-family="monospace" font-size="9" text-anchor="middle">nba_api</text>
                        <rect x="756" y="138" width="80" height="20" fill="#222" stroke="#666" stroke-width="1" rx="0"/><text x="796" y="152" fill="#ccc" font-family="monospace" font-size="9" text-anchor="middle">SQLite</text>
                        <rect x="756" y="164" width="80" height="20" fill="#222" stroke="#666" stroke-width="1" rx="0"/><text x="796" y="178" fill="#ccc" font-family="monospace" font-size="9" text-anchor="middle">scipy</text>

                        <!-- Bottom scanline -->
                        <line x1="0" y1="818" x2="860" y2="818" stroke="#00FF55" stroke-width="2" opacity="0.4"/>
                    </svg>
                </div>

                <h4 class="blog-section-header bebas">THE 4-PHASE ARCHITECTURE</h4>
                <p class="blog-body-text">
                    The NBA SIM operates as a <strong>4-phase CLI pipeline</strong> (<code>python main.py [collect|analyze|scores|predict|all]</code>). Each phase builds on the previous, with all data persisted to a 17-table SQLite database.
                </p>

                <div class="pipeline-step">
                    <span class="step-num">P1</span>
                    <span class="step-text"><strong>Collect</strong> &mdash; Six collectors run in sequence: <code>PlayerCollector</code> pulls teams, rosters, and season stats from <code>nba_api</code>. <code>GameCollector</code> fetches game results. <code>LineupCollector</code> pulls 2-through-5-man lineup combinations with net rating and possession counts (with minimum possession thresholds: 30 for 5-man, 50 for 4-man, 75 for 3-man, 100 for 2-man). <code>PlayTypeCollector</code> calls <code>SynergyPlayTypes</code> for all 11 play types in both offensive and defensive groupings. <code>BoxScoreCollector</code> ingests per-game player stats with 27 columns (points, rebounds, assists, plus advanced metrics like usage rate, true shooting, offensive/defensive rating, PIE). <code>OddsCollector</code> pulls live spreads and totals from The Odds API across multiple bookmakers.</span>
                </div>
                <div class="pipeline-step">
                    <span class="step-num">P2</span>
                    <span class="step-text"><strong>Analyze</strong> &mdash; Two parallel analysis engines. The <strong>Coaching Scheme Classifier</strong> builds per-team offensive and defensive profiles by pivoting play type frequencies and PPP values, computing percentile ranks across all 30 teams, then scoring each team against scheme templates (PnR-Heavy, ISO-Heavy, Motion, Run-and-Gun, Spot-Up Heavy, Post-Oriented for offense; Switch-Everything, Drop-Coverage, Rim-Protect, Trans-Defense, Blitz for defense). The <strong>Player Archetype Clusterer</strong> runs K-Means independently for each of the 5 position groups (PG, SG, SF, PF, C) using position-weighted features, StandardScaler normalization, PCA reduction to 8 components, silhouette-optimized K selection (range 3-6 with a K=4 bias when silhouette delta &lt; 0.05), and Hungarian algorithm label assignment that optimally matches cluster centroids to archetype profile templates defined as z-score direction vectors.</span>
                </div>
                <div class="pipeline-step">
                    <span class="step-num">P3</span>
                    <span class="step-text"><strong>Value Scores</strong> &mdash; The <strong>Composite Value Score</strong> for each player is a weighted blend of 6 components. <strong>Solo impact</strong> (21% weight) measures individual on-court effect. <strong>2-man synergy</strong> (19.6%) through <strong>5-man synergy</strong> (6.3%) capture how well a player performs in specific lineup combinations, with Bayesian shrinkage priors that pull small-sample estimates toward league average (prior strengths: 500 minutes for solo, 30-100 possessions for multi-man). <strong>Base value</strong> (25%) covers raw per-36 production. <strong>Archetype fit</strong> (5%) rewards players whose on-court tendencies match their team's coaching scheme. The synergy portion (70% total) is the core innovation.</span>
                </div>
                <div class="pipeline-step">
                    <span class="step-num">P4</span>
                    <span class="step-text"><strong>Predict</strong> &mdash; A <code>FeatureEngineer</code> builds training matrices from the value scores and team-level features. A <code>GamePredictor</code> trains models for spread and total predictions. A <code>ModelEvaluator</code> backtests by training on season N-1 and evaluating on season N, measuring spread/total accuracy. The <code>generate_frontend.py</code> script produces a self-contained HTML dashboard that fetches live odds, computes consensus lines across bookmakers, grades matchup edges (A/B/C), and displays today's games with full scheme and archetype context.</span>
                </div>

                <!-- NBA DATA SCHEMA DIAGRAM -->
                <div class="diagram-label mono" style="margin-top:24px">FIG. 04: NBA SIM &mdash; DATABASE SCHEMA &amp; DATA RELATIONSHIPS</div>
                <div class="system-diagram">
                    <svg viewBox="0 0 860 560" xmlns="http://www.w3.org/2000/svg" style="background:#080808">
                        <defs>
                            <marker id="nba-s" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#00FF55"/></marker>
                            <marker id="nba-d" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto"><polygon points="0 0, 10 4, 0 8" fill="#00cc44"/></marker>
                            <pattern id="nba-grid2" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1a1a1a" stroke-width="0.5"/></pattern>
                            <filter id="nba-glow2"><feGaussianBlur stdDeviation="3" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        </defs>
                        <rect width="860" height="560" fill="url(#nba-grid2)"/>
                        <!-- Scanlines -->
                        <line x1="0" y1="0" x2="860" y2="0" stroke="#00FF55" stroke-width="3" opacity="0.6"/>
                        <line x1="0" y1="559" x2="860" y2="559" stroke="#00FF55" stroke-width="2" opacity="0.4"/>
                        <!-- Title block -->
                        <rect x="0" y="8" width="860" height="38" fill="#111"/>
                        <text x="20" y="34" fill="#00FF55" font-family="monospace" font-size="14" font-weight="bold" letter-spacing="4">DATABASE SCHEMA &mdash; 17 TABLES</text>
                        <text x="840" y="34" fill="#555" font-family="monospace" font-size="9" text-anchor="end">SQLite &bull; nba_sim.db</text>
                        <line x1="0" y1="50" x2="860" y2="50" stroke="#00FF55" stroke-width="2" opacity="0.3"/>

                        <!-- ── LAYER: REFERENCE TABLES ── -->
                        <rect x="16" y="60" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="72" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">REFERENCE TABLES</text>

                        <!-- teams -->
                        <rect x="20" y="84" width="150" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="84" width="150" height="20" fill="#00FF55"/><text x="95" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">teams</text>
                        <text x="95" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">team_id PK</text>
                        <text x="95" y="132" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">abbreviation, name</text>
                        <text x="95" y="146" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">conference, division</text>

                        <!-- players -->
                        <rect x="184" y="84" width="150" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="184" y="84" width="150" height="20" fill="#00FF55"/><text x="259" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">players</text>
                        <text x="259" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player_id PK</text>
                        <text x="259" y="132" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">name, position</text>
                        <text x="259" y="146" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">height, weight, age</text>

                        <!-- roster_assignments -->
                        <rect x="348" y="84" width="185" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="348" y="84" width="185" height="20" fill="#00FF55"/><text x="440" y="98" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">roster_assignments</text>
                        <text x="440" y="118" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player+team+season PK</text>
                        <text x="440" y="132" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">jersey_number</text>
                        <text x="440" y="146" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">FK &rarr; teams, players</text>

                        <!-- ── LAYER: GAME DATA ── -->
                        <line x1="259" y1="152" x2="259" y2="172" stroke="#00FF55" stroke-width="2" marker-end="url(#nba-s)"/>
                        <rect x="16" y="178" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="190" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">GAME DATA</text>

                        <!-- games -->
                        <rect x="20" y="202" width="140" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="202" width="140" height="20" fill="#00FF55"/><text x="90" y="216" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">games</text>
                        <text x="90" y="236" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">game_id PK</text>
                        <text x="90" y="250" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">date, home/away team</text>
                        <text x="90" y="264" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">home/away score</text>

                        <!-- player_game_stats -->
                        <rect x="174" y="202" width="180" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="174" y="202" width="180" height="20" fill="#00FF55"/><text x="264" y="216" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">player_game_stats</text>
                        <text x="264" y="236" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">game+player PK</text>
                        <text x="264" y="250" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">27 cols: pts, ast, reb</text>
                        <text x="264" y="264" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">USG%, TS%, OРТG, PIE</text>

                        <!-- lineup_stats -->
                        <rect x="368" y="202" width="160" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="368" y="202" width="160" height="20" fill="#00FF55"/><text x="448" y="216" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">lineup_stats</text>
                        <text x="448" y="236" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">lineup+season PK</text>
                        <text x="448" y="250" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">2-5 man combos</text>
                        <text x="448" y="264" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">net rtg, possessions</text>

                        <!-- lineup_players -->
                        <rect x="542" y="202" width="155" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2"/>
                        <rect x="542" y="202" width="155" height="20" fill="#00FF55"/><text x="619" y="216" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">lineup_players</text>
                        <text x="619" y="236" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">lineup+season+player</text>
                        <text x="619" y="250" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Junction table</text>
                        <text x="619" y="264" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">FK &rarr; lineup_stats</text>

                        <!-- betting_lines -->
                        <rect x="710" y="202" width="130" height="68" fill="#0e0e0e" stroke="#00cc44" stroke-width="2"/>
                        <rect x="710" y="202" width="130" height="20" fill="#00cc44"/><text x="775" y="216" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">betting_lines</text>
                        <text x="775" y="236" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">game+book+mkt PK</text>
                        <text x="775" y="250" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">price, point</text>
                        <text x="775" y="264" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">retrieved_at timestamp</text>

                        <!-- ── LAYER: PLAY TYPES & SEASON STATS ── -->
                        <line x1="264" y1="270" x2="264" y2="290" stroke="#00FF55" stroke-width="2" marker-end="url(#nba-s)"/>
                        <rect x="16" y="296" width="4" height="14" fill="#00FF55"/>
                        <text x="28" y="308" fill="#00FF55" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">PLAY TYPES &amp; SEASON STATS</text>

                        <!-- team_playtypes -->
                        <rect x="20" y="320" width="160" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="20" y="320" width="160" height="20" fill="#00FF55"/><text x="100" y="334" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">team_playtypes</text>
                        <text x="100" y="354" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">team+season+type PK</text>
                        <text x="100" y="368" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">freq%, PPP, eFG%</text>
                        <text x="100" y="382" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">TO%, score_freq</text>

                        <!-- player_playtypes -->
                        <rect x="194" y="320" width="165" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="194" y="320" width="165" height="20" fill="#00FF55"/><text x="276" y="334" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">player_playtypes</text>
                        <text x="276" y="354" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player+season+type PK</text>
                        <text x="276" y="368" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">Off/Def grouping</text>
                        <text x="276" y="382" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">freq%, PPP, percentile</text>

                        <!-- player_season_stats -->
                        <rect x="373" y="320" width="175" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="373" y="320" width="175" height="20" fill="#00FF55"/><text x="460" y="334" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">player_season_stats</text>
                        <text x="460" y="354" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player+season PK</text>
                        <text x="460" y="368" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">30 cols: per-game + per36</text>
                        <text x="460" y="382" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">pts, ast, reb, TS%, USG%</text>

                        <!-- team_season_stats -->
                        <rect x="562" y="320" width="160" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2"/>
                        <rect x="562" y="320" width="160" height="20" fill="#00FF55"/><text x="642" y="334" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">team_season_stats</text>
                        <text x="642" y="354" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">team+season PK</text>
                        <text x="642" y="368" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">pace, off/def rtg</text>
                        <text x="642" y="382" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">FG%, 3P%, FT%, rates</text>

                        <!-- ── LAYER: DERIVED & OUTPUT ── -->
                        <line x1="380" y1="388" x2="380" y2="408" stroke="#00cc44" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#nba-d)"/>
                        <rect x="16" y="414" width="4" height="14" fill="#00cc44"/>
                        <text x="28" y="426" fill="#00cc44" font-family="monospace" font-size="11" font-weight="bold" letter-spacing="2">DERIVED &amp; OUTPUT (ANALYSIS PRODUCTS)</text>

                        <!-- coaching_profiles -->
                        <rect x="20" y="440" width="155" height="68" fill="#0e0e0e" stroke="#00cc44" stroke-width="2.5"/>
                        <rect x="20" y="440" width="155" height="20" fill="#00cc44"/><text x="97" y="454" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">coaching_profiles</text>
                        <text x="97" y="474" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">team+season PK</text>
                        <text x="97" y="488" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">off/def scheme labels</text>
                        <text x="97" y="502" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">pace, top 3 playstyles</text>

                        <!-- player_archetypes -->
                        <rect x="189" y="440" width="155" height="68" fill="#0e0e0e" stroke="#00cc44" stroke-width="2.5"/>
                        <rect x="189" y="440" width="155" height="20" fill="#00cc44"/><text x="266" y="454" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">player_archetypes</text>
                        <text x="266" y="474" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player+season PK</text>
                        <text x="266" y="488" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">archetype_label</text>
                        <text x="266" y="502" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">confidence, feature vec</text>

                        <!-- player_value_scores -->
                        <rect x="358" y="440" width="175" height="68" fill="#0e0e0e" stroke="#00cc44" stroke-width="2.5"/>
                        <rect x="358" y="440" width="175" height="20" fill="#00cc44"/><text x="445" y="454" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">player_value_scores</text>
                        <text x="445" y="474" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player+season PK</text>
                        <text x="445" y="488" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">composite_value float</text>
                        <text x="445" y="502" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">solo + 2/3/4/5-man synergy</text>

                        <!-- pair_synergy -->
                        <rect x="547" y="440" width="145" height="68" fill="#0e0e0e" stroke="#00cc44" stroke-width="2"/>
                        <rect x="547" y="440" width="145" height="20" fill="#00cc44"/><text x="619" y="454" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">pair_synergy</text>
                        <text x="619" y="474" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">player_a + player_b</text>
                        <text x="619" y="488" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">net_rating, minutes</text>
                        <text x="619" y="502" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">archetype pair labels</text>

                        <!-- predictions -->
                        <rect x="706" y="440" width="134" height="68" fill="#0e0e0e" stroke="#00FF55" stroke-width="2.5"/>
                        <rect x="706" y="440" width="134" height="20" fill="#00FF55"/><text x="773" y="454" fill="#000" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">predictions</text>
                        <text x="773" y="474" fill="#ccc" font-family="monospace" font-size="8" text-anchor="middle">game+season PK</text>
                        <text x="773" y="488" fill="#888" font-family="monospace" font-size="8" text-anchor="middle">spread, total</text>
                        <text x="773" y="502" fill="#666" font-family="monospace" font-size="7" text-anchor="middle">edge, confidence</text>

                        <!-- Relationship arrows: reference → game data -->
                        <line x1="90" y1="152" x2="90" y2="202" stroke="#00FF55" stroke-width="1.5" marker-end="url(#nba-s)"/>
                        <line x1="259" y1="152" x2="264" y2="202" stroke="#00FF55" stroke-width="1.5" marker-end="url(#nba-s)"/>

                        <!-- Dashed: playtypes → derived -->
                        <line x1="100" y1="388" x2="97" y2="440" stroke="#00cc44" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#nba-d)"/>
                        <line x1="276" y1="388" x2="266" y2="440" stroke="#00cc44" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#nba-d)"/>
                        <line x1="460" y1="388" x2="445" y2="440" stroke="#00cc44" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#nba-d)"/>

                        <!-- Bottom flow label -->
                        <rect x="80" y="520" width="700" height="30" fill="#111" stroke="#444" stroke-width="1"/>
                        <text x="430" y="538" fill="#555" font-family="monospace" font-size="8" text-anchor="middle">collect &rarr; analyze &rarr; scores &rarr; predict &bull; Each phase reads/writes the same SQLite DB &bull; Dashed = derived tables (analysis output)</text>

                        <!-- Bottom scanline -->
                        <line x1="0" y1="558" x2="860" y2="558" stroke="#00FF55" stroke-width="2" opacity="0.4"/>
                    </svg>
                </div>

                <h4 class="blog-section-header bebas">KEY DESIGN DECISIONS</h4>
                <p class="blog-body-text">
                    <strong>Percentile-Rank Scheme Classification:</strong> Instead of using raw play type frequencies, we rank each team's values against all 30 teams to compute percentile scores (0-1). This ensures meaningful differentiation regardless of season-level shifts in play style trends. A team running 18% isolation isn't inherently "ISO-Heavy" unless they're in the top percentile of the league.
                </p>
                <p class="blog-body-text">
                    <strong>Position-Weighted Clustering:</strong> Not all stats matter equally for every position. Centers are weighted toward blocks and rebounds; guards toward assists and three-point attempts. The <code>POSITION_FEATURE_WEIGHTS</code> dictionary applies multipliers before StandardScaler normalization, ensuring PCA captures position-relevant variance. The K=4 bias (accepting K=4 over K=3 when silhouette delta &lt; 0.05) prevents oversimplification.
                </p>
                <p class="blog-body-text">
                    <strong>Hungarian Algorithm for Label Assignment:</strong> Each archetype label (e.g., "Floor General", "Rim Protector") is defined as a z-score direction vector. After clustering, we build a cost matrix scoring how well each cluster centroid matches each label template, then use the Hungarian algorithm for optimal bipartite matching. This guarantees the most appropriate label assignment without manual intervention.
                </p>
                <p class="blog-body-text">
                    <strong>Bayesian Shrinkage in Synergy Scores:</strong> Small-sample lineup data is unreliable. A 5-man lineup with 35 possessions and +20 net rating shouldn't dominate a player's value. We apply Bayesian priors that shrink estimates toward league average, with prior strength proportional to data granularity (100 possessions for 5-man, 30 for 2-man). This balances signal extraction with noise reduction.
                </p>

                <div class="blog-tags mono">
                    <span class="tag">METHODOLOGY</span>
                    <span class="tag">NBA</span>
                    <span class="tag">DATA ARCHITECTURE</span>
                    <span class="tag">DEVLOG</span>
                </div>
                </div>
            </details>


            <!-- ═══════════════════════════════════════════════════ -->
            <!-- EXISTING BLOG POSTS                               -->
            <!-- ═══════════════════════════════════════════════════ -->
            <details class="blog-card">
                <summary>
                    <div class="blog-meta mono">
                        <span class="blog-date">FEB 14, 2024</span>
                        <div class="blog-system-dots">
                            <div class="blog-system-dot dot-nba-sim" title="NBA SIM"></div>
                        </div>
                    </div>
                    <h3 class="blog-title bebas">HOW THE SCHEME DETECTION MODEL WORKS</h3>
                    <p class="blog-preview">
                        We've overhauled the defensive classification engine. Instead of relying on raw box scores, we now track possession-based player tracking data to identify zone tendencies in real-time.
                    </p>
                </summary>
                <div class="blog-card-body">
                    <div class="flowchart-block mono">
                        [ FIG. 01: DATA INGESTION PIPELINE ]
                    </div>
                    <div class="blog-tags mono">
                        <span class="tag">METHODOLOGY</span>
                        <span class="tag">NBA</span>
                        <span class="tag">DEVLOG</span>
                    </div>
                </div>
            </details>
            <details class="blog-card">
                <summary>
                    <div class="blog-meta mono">
                        <span class="blog-date">FEB 10, 2024</span>
                    </div>
                    <h3 class="blog-title bebas">WHY TRADITIONAL PROPS MODELS ARE BROKEN</h3>
                    <p class="blog-preview">
                        Most public models fail to account for rotation changes due to mid-game injuries. Our new variance calculator adjusts confidence intervals dynamically based on live roster updates.
                    </p>
                </summary>
                <div class="blog-card-body">
                    <div class="blog-tags mono">
                        <span class="tag">METHODOLOGY</span>
                        <span class="tag">ANALYSIS</span>
                    </div>
                </div>
            </details>
            <details class="blog-card">
                <summary>
                    <div class="blog-meta mono">
                        <span class="blog-date">FEB 02, 2024</span>
                    </div>
                    <h3 class="blog-title bebas">DESIGN SYSTEM V2: MOVING FROM GREY TO BLACK</h3>
                    <p class="blog-preview">
                        A look into the UI refactor. We needed higher contrast ratios for the simulation terminal. The new dark mode isn't just aesthetic&mdash;it reduces eye strain during long trading sessions.
                    </p>
                </summary>
                <div class="blog-card-body">
                    <div class="blog-tags mono">
                        <span class="tag">DESIGN</span>
                        <span class="tag">UI/UX</span>
                    </div>
                </div>
            </details>
            <details class="blog-card">
                <summary>
                    <div class="blog-meta mono">
                        <span class="blog-date">JAN 28, 2024</span>
                        <div class="blog-system-dots">
                            <div class="blog-system-dot dot-mlb-sim" title="MLB SIM"></div>
                        </div>
                    </div>
                    <h3 class="blog-title bebas">ADDING PITCHER HANDEDNESS SPLITS TO MLB SIM</h3>
                    <p class="blog-preview">
                        Left-handed batters against slider-heavy RHP at Coors Field. We break down the specific edge cases where our previous model was underpricing the over.
                    </p>
                </summary>
                <div class="blog-card-body">
                    <div class="blog-tags mono">
                        <span class="tag">MLB</span>
                        <span class="tag">UPDATE</span>
                    </div>
                </div>
            </details>
        </div>
    </div>
    <footer>
        <div class="footer-content">
            <div class="brand-lockup">
                <div class="logo anton" style="color:#FFF; font-size:16px;">MORELLO SIMS</div>
            </div>
            <div class="footer-links mono uppercase">
                <a href="#">Twitter</a>
                <a href="#">About</a>
                <a href="#">Contact</a>
            </div>
            <div class="barcode"></div>
            <div class="mono" style="font-size: 8px; color: #444;">
                &copy; 2026 MORELLO ANALYTICS. ALL RIGHTS RESERVED. <br>
                SYSTEM STATUS: OPERATIONAL
            </div>
        </div>
    </footer>
</body>
</html>
